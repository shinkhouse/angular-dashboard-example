import{a as C,j as D,t as R}from"./chunk-FUZY7AID.js";import{B as x,C as p,Y as c,Z as m,Za as w,ba as k,ca as o,g as y,ga as v,gc as S,i as b,j as f,o as _,z as E}from"./chunk-JOCWNNNL.js";function j(n){return n&&typeof n.connect=="function"&&!(n instanceof b)}var z=class{applyChanges(t,h,e,i,r){t.forEachOperation((s,l,a)=>{let d,u;if(s.previousIndex==null){let g=e(s,l,a);d=h.createEmbeddedView(g.templateRef,g.context,g.index),u=1}else a==null?(h.remove(l),u=3):(d=h.get(l),h.move(d,a),u=2);r&&r({context:d?.context,operation:u,record:s})})}detach(){}};var P=(()=>{let t=class t{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),A=new k("_ViewRepeater");var I=20,De=(()=>{let t=class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new f,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=I){return this._platform.isBrowser?new y(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(p(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):_()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(x(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=D(i),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return E(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(i){return new(i||t)(o(w),o(C),o(S,8))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var F=20,ze=(()=>{let t=class t{constructor(e,i,r){this._platform=e,this._change=new f,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),l=-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:l,left:a}}change(e=F){return e>0?this._change.pipe(p(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(i){return new(i||t)(o(C),o(w),o(S,8))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var O=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=v({type:t}),t.\u0275inj=m({});let n=t;return n})(),Oe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=v({type:t}),t.\u0275inj=m({imports:[R,O,R,O]});let n=t;return n})();export{j as a,z as b,P as c,A as d,De as e,ze as f,O as g,Oe as h};
